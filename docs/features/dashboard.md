# ダッシュボード

**カテゴリ**: 基本機能強化 | **優先度**: 推奨

サイドバー型レイアウトとダッシュボード画面を実装する。

---

## 目的

- サイドバー型の拡張可能なレイアウト構築
- アプリ起動時の初期画面として機能
- 主要機能へのクイックアクセスを提供
- 現在の状態（履歴・モデル）を一覧表示

---

## レイアウト構造

```
┌─────────────────────────────────────────────────────┐
│  Whisper Tauri                              [─][□][×]│
├────────────┬────────────────────────────────────────┤
│            │                                        │
│  📊 ダッシュ │   メインコンテンツエリア                │
│     ボード  │   （各画面がここに表示される）          │
│  📝 文字起こし│                                        │
│            │                                        │
│  ─────────  │                                        │
│  ⚙ 設定    │                                        │
│            │                                        │
│  ─────────  │                                        │
│  🔧 Dev    │   ※ 開発ビルドのみ表示                  │
│            │                                        │
└────────────┴────────────────────────────────────────┘
```

### サイドバー

| セクション | メニュー項目 | パス | 説明 |
|-----------|------------|------|------|
| メイン | ダッシュボード | `/` | ダッシュボード画面 |
| メイン | 文字起こし | `/transcription` | 文字起こし画面（MVP機能） |
| 設定 | 設定 | `/settings` | 設定画面 |
| 開発 | Dev | `/dev` | 開発メニュー（DEVのみ） |

### 将来の拡張例

| メニュー項目 | パス | 機能追加時に追加 |
|------------|------|-----------------|
| 録音 | `/recording` | リアルタイム録音機能 |
| 履歴 | `/history` | 履歴管理機能 |

---

## ダッシュボード画面

### 表示内容

#### 1. クイックアクション

主要機能へのショートカットボタン：

| アクション | 説明 |
|-----------|------|
| 文字起こし | 文字起こし画面へ遷移 |
| 設定 | 設定画面へ遷移 |

※ 機能追加に応じてアクションを追加可能

#### 2. 履歴一覧

最近の文字起こし履歴を表示：

| 項目 | 説明 |
|-----|------|
| 表示件数 | 最新5件程度 |
| 表示情報 | ファイル名、日時、モデル名 |
| 操作 | クリックで詳細表示 |
| リンク | 「すべて表示」で履歴画面へ |

#### 3. モデル一覧

ダウンロード済みモデルの状態を表示：

| 項目 | 説明 |
|-----|------|
| 表示情報 | モデル名、サイズ、ダウンロード状態 |
| 操作 | 未ダウンロードモデルのダウンロード開始 |
| 現在のモデル | 使用中モデルをハイライト |

---

## テスト要件

### TypeScript (Vitest)

`src/components/layout/__tests__/Sidebar.test.tsx`:

| テスト | 内容 |
|-------|------|
| 表示 | サイドバーが正しくレンダリングされる |
| メニュー | 各メニュー項目が表示される |
| アクティブ | 現在のルートがハイライトされる |
| Dev | DEV環境でのみDevメニューが表示される |

`src/components/layout/__tests__/AppLayout.test.tsx`:

| テスト | 内容 |
|-------|------|
| 表示 | レイアウトが正しくレンダリングされる |
| 構造 | サイドバーとメインエリアが存在する |

`src/components/dashboard/__tests__/Dashboard.test.tsx`:

| テスト | 内容 |
|-------|------|
| 表示 | ダッシュボードが正しくレンダリングされる |
| クイックアクション | 各アクションボタンが表示される |
| 履歴セクション | 履歴一覧が表示される |
| モデルセクション | モデル一覧が表示される |

---

## 実装内容

### 1. ルーティング設定

`@solidjs/router` を使用：

| パス | コンポーネント | 説明 |
|-----|--------------|------|
| `/` | `Dashboard` | ダッシュボード（初期画面） |
| `/transcription` | `Transcription` | 文字起こし画面 |
| `/settings` | `Settings` | 設定画面 |
| `/dev` | `DevMenu` | 開発メニュー（DEVのみ） |

### 2. レイアウトコンポーネント

| コンポーネント | 説明 |
|--------------|------|
| `AppLayout` | 全体レイアウト（サイドバー + メイン） |
| `Sidebar` | サイドバーナビゲーション |
| `SidebarItem` | メニュー項目 |
| `SidebarSection` | メニューセクション区切り |

### 3. ダッシュボードコンポーネント

| コンポーネント | 説明 |
|--------------|------|
| `Dashboard` | メインコンテナ |
| `QuickActions` | アクションボタン群 |
| `RecentHistory` | 履歴一覧 |
| `ModelStatus` | モデル状態一覧 |

### 4. 既存機能の移行

MVP の App.tsx の内容を `Transcription` コンポーネントとして `/transcription` に移行。

---

## 依存機能

| 機能 | 必須 | 理由 |
|-----|------|------|
| 履歴管理 | No | 履歴一覧の表示に使用（なければ空表示） |
| モデル管理 | Yes | モデル状態の取得に必要 |
| 設定永続化 | No | 設定画面で使用 |
| 開発メニュー | No | Devメニューで使用 |

---

## 作成ファイル

| ファイル | 説明 |
|---------|------|
| `src/components/layout/__tests__/Sidebar.test.tsx` | **テスト（先に作成）** |
| `src/components/layout/__tests__/AppLayout.test.tsx` | **テスト（先に作成）** |
| `src/components/dashboard/__tests__/Dashboard.test.tsx` | **テスト（先に作成）** |
| `src/components/layout/AppLayout.tsx` | 全体レイアウト |
| `src/components/layout/Sidebar.tsx` | サイドバー |
| `src/components/layout/SidebarItem.tsx` | メニュー項目 |
| `src/components/layout/index.ts` | エクスポート |
| `src/components/dashboard/Dashboard.tsx` | ダッシュボード |
| `src/components/dashboard/QuickActions.tsx` | アクションボタン |
| `src/components/dashboard/RecentHistory.tsx` | 履歴一覧 |
| `src/components/dashboard/ModelStatus.tsx` | モデル状態 |
| `src/components/dashboard/index.ts` | エクスポート |
| `src/pages/Transcription.tsx` | 文字起こし画面（MVP移行） |
| `src/App.tsx` | ルーティング設定に変更 |

---

## 完了条件

- [ ] `pnpm test` でテストが通る
- [ ] サイドバー型レイアウトが表示される
- [ ] ダッシュボードが初期画面として表示される
- [ ] サイドバーから各画面に遷移できる
- [ ] 文字起こし画面が正常に動作する
- [ ] クイックアクションから各機能に遷移できる
- [ ] 履歴一覧が表示される（または空表示）
- [ ] モデル一覧が表示される

---

## 関連ドキュメント

- [Step 7: メインアプリ統合](../mvp/step-07.md) - MVP の App.tsx 構成。本機能実装時に移行が必要
