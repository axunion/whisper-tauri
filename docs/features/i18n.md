# 多言語対応 (i18n)

**カテゴリ**: UX改善 | **優先度**: 任意

日本語/英語の切り替え機能を実装する。

---

## 目的

- 多言語対応システムの構築
- 言語切り替えUI
- 翻訳辞書の管理

---

## テスト要件

### TypeScript (Vitest)

`src/i18n/__tests__/index.test.ts`:

| テスト | 内容 |
|-------|------|
| createI18n | 初期ロケールで辞書が設定される |
| t | ドット記法でキーを取得できる |
| t | 存在しないキーはキー自体を返す |
| setLocale | ロケールを変更できる |
| setLocale | 辞書が切り替わる |

`src/i18n/__tests__/dictionaries.test.ts`:

| テスト | 内容 |
|-------|------|
| ja | 全キーが定義されている |
| en | 全キーが定義されている |
| en | ja と同じ構造を持つ |

---

## 実装内容

### 1. 翻訳辞書

`src/i18n/dictionaries/` に各言語の辞書ファイルを作成。

#### 辞書構造

| キー | 説明 |
|-----|------|
| app.title | アプリタイトル |
| file.title | ファイルセクションタイトル |
| file.dropzone | ドロップゾーンのテキスト |
| file.supported | 対応形式の説明 |
| model.title | モデルセクションタイトル |
| model.download | ダウンロードボタン |
| transcription.start | 開始ボタン |
| transcription.processing | 処理中メッセージ |
| transcription.cancel | キャンセルボタン |
| transcription.newFile | 新規ファイルボタン |
| transcription.retry | 再実行ボタン |
| result.title | 結果セクションタイトル |
| result.copy | コピーボタン |
| result.save | 保存ボタン |
| result.language | 言語ラベル |
| result.duration | 長さラベル |
| errors.* | エラーメッセージ |

### 2. i18n設定

`src/i18n/index.ts` に以下を実装：

#### createI18n関数

| 戻り値 | 説明 |
|-------|------|
| locale | 現在のロケール |
| setLocale | ロケールを変更 |
| t | 翻訳関数 |
| dict | 辞書オブジェクト |

#### I18nProvider

- Contextを使用してアプリ全体に提供
- initialLocaleプロパティで初期言語を設定

#### useI18n

- コンポーネント内でi18nを取得するフック

### 3. 使用方法

- index.tsx で `<I18nProvider>` でアプリをラップ
- コンポーネント内で `const { t } = useI18n()` で翻訳関数を取得
- `t('app.title')` のようにドット記法でキーを指定

---

## 作成ファイル

| ファイル | 説明 |
|---------|------|
| `src/i18n/__tests__/index.test.ts` | **テスト（先に作成）** |
| `src/i18n/__tests__/dictionaries.test.ts` | **テスト（先に作成）** |
| `src/i18n/dictionaries/ja.ts` | 日本語辞書 |
| `src/i18n/dictionaries/en.ts` | 英語辞書 |
| `src/i18n/index.ts` | i18n設定 |

---

## 完了条件

- [ ] `pnpm test` で全テストが通る
- [ ] 言語切り替えが動作する
- [ ] 全UIテキストが翻訳される
